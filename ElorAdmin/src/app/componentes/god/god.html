<div class="god-container container mt-4">

  <div class="row mb-4">
    <div class="col-12 text-center">
      <h2><i class="bi bi-shield-lock-fill"></i> Panel GOD (Administrador General)</h2>
    </div>
  </div>

  <div class="row">
    <div class="col-sm mb-3">
      <div class="stat-card bg-primary text-white">
        <span class="stat-label"><i class="bi bi-people-fill"></i> Alumnos</span>
        <span class="stat-value">{{totales.alumnos}}</span>
      </div>
    </div>
    <div class="col-sm mb-3">
      <div class="stat-card bg-success text-white">
        <span class="stat-label"><i class="bi bi-person-workspace"></i> Profesores</span>
        <span class="stat-value">{{totales.profesores}}</span>
      </div>
    </div>
    <div class="col-sm mb-3">
      <div class="stat-card bg-warning text-dark">
        <span class="stat-label"><i class="bi bi-calendar-event"></i> Reuniones Hoy</span>
        <span class="stat-value">{{totales.reunionesHoy}}</span>
      </div>
    </div>
  </div>

  <hr class="my-4">

  <div class="d-flex justify-content-between align-items-center mb-2">
    <h4>Administradores <i class="bi bi-person-badge"></i></h4>
    <button class="btn btn-sm btn-outline-primary" (click)="nuevoAdmin()">Nuevo administrador</button>
  </div>

  <div class="table-responsive shadow rounded">
    <table class="table table-hover align-middle mb-0">
      <thead class="table-light">
        <tr>
          <th>Usuario</th>
          <th>Nombre completo</th>
          <th>Email</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let admin of admins">
          <td>{{admin.username}}</td>
          <td>{{admin.nombre}} {{admin.apellidos}}</td>
          <td>{{admin.email}}</td>
          <td>
            <button class="btn btn-outline-secondary btn-sm me-1" (click)="editarAdmin(admin)">
              <i class="bi bi-pencil-square"></i>
            </button>
            <button 
              *ngIf="admin.username !== 'goduser'" 
              class="btn btn-outline-danger btn-sm"
              (click)="borrarAdmin(admin)">
              <i class="bi bi-trash"></i>
            </button>
            <span *ngIf="admin.username === 'goduser'" class="badge text-bg-dark">God</span>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div *ngIf="showForm" class="form-modal mt-4">
    <h5>{{editando ? 'Editar administrador' : 'Nuevo administrador'}}</h5>
    <form (ngSubmit)="guardarAdmin()" [ngClass]="{'was-validated': submitted}" novalidate>
      <div class="row">
        <div class="col-md-3 mb-2">
          <input class="form-control" [(ngModel)]="form.username" name="username" required placeholder="Usuario" [readonly]="editando"/>
        </div>
        <div class="col-md-3 mb-2">
          <input class="form-control" [(ngModel)]="form.nombre" name="nombre" required placeholder="Nombre"/>
        </div>
        <div class="col-md-3 mb-2">
          <input class="form-control" [(ngModel)]="form.apellidos" name="apellidos" required placeholder="Apellidos"/>
        </div>
        <div class="col-md-3 mb-2">
          <input class="form-control" [(ngModel)]="form.email" name="email" required placeholder="Email" type="email"/>
        </div>
      </div>
      <div class="row">
        <div class="col-6 mb-2">
          <input class="form-control" [(ngModel)]="form.password" name="password" [required]="!editando" placeholder="ContraseÃ±a" type="password"/>
        </div>
      </div>
      <button class="btn btn-success me-1" type="submit">{{editando ? 'Guardar' : 'Crear'}}</button>
      <button class="btn btn-secondary" type="button" (click)="cancelar()">Cancelar</button>
    </form>
    <div *ngIf="formError" class="alert alert-danger mt-2">{{formError}}</div>
  </div>
  
</div>